# packages/ha1_helpers_1_3.yaml
#
# HomeAssistant 1.3 – canonical helper entities (Task 16)
# Centralizes all sliders, toggles, and mode selectors used by the HA1 logic.

############################################################
# Input booleans – master toggles, comfort overrides, debug flags
############################################################

input_boolean:
  ha1_control_ev_auto:
    name: HA1 EV Charging – automation enabled
    icon: mdi:car-electric

  ha1_control_battery_auto:
    name: HA1 Battery Optimization – automation enabled
    icon: mdi:battery-sync

  ha1_peak_shaving_enabled:
    name: HA1 Peak Shaving Enabled
    icon: mdi:flash-alert

  ha1_comfort_override_active:
    name: HA1 Comfort Override Active
    icon: mdi:human-handsup

  ha1_comfort_ev_charge_now:
    name: HA1 Comfort – Charge EV Now
    icon: mdi:ev-station

  ha1_export_block:
    name: HA1 Export Block Active
    icon: mdi:transmission-tower-off

  ha1_debug_mode_enabled:
    name: HA1 Debug Mode Enabled
    icon: mdi:application-brackets-outline

  ha1_debug_log_peak_events:
    name: HA1 Debug – Log Peak Events
    icon: mdi:chart-timeline-variant

############################################################
# Input numbers – peak limits, SOC thresholds, EV planning sliders
############################################################

input_number:
  ha1_peak_limit_kw:
    name: HA1 Peak Limit (kW)
    icon: mdi:flash
    min: 3
    max: 25
    step: 0.1
    mode: slider
    unit_of_measurement: "kW"

  ha1_peak_warning_margin_kw:
    name: HA1 Peak Warning Margin (kW)
    icon: mdi:shield-alert
    min: 0
    max: 5
    step: 0.1
    mode: slider
    unit_of_measurement: "kW"

  ha1_ev_limit_current_a:
    name: HA1 EV Max Current (A)
    icon: mdi:current-ac
    min: 0
    max: 32
    step: 1
    mode: slider
    unit_of_measurement: "A"

  ha1_ev_soc_min_pct:
    name: HA1 EV Minimum SOC (%)
    icon: mdi:battery-medium
    min: 10
    max: 80
    step: 1
    mode: slider
    unit_of_measurement: "%"

  ha1_ev_soc_max_pct:
    name: HA1 EV Maximum SOC (%)
    icon: mdi:battery-high
    min: 40
    max: 100
    step: 1
    mode: slider
    unit_of_measurement: "%"

  ha1_ev_required_range_km:
    name: HA1 EV Required Range (km)
    icon: mdi:map-marker-distance
    min: 0
    max: 600
    step: 5
    mode: slider
    unit_of_measurement: "km"

  ha1_batt_grid_charge_max_kw:
    name: HA1 Battery Grid Charge Max (kW)
    icon: mdi:battery-charging
    min: 0
    max: 2.5
    step: 0.1
    mode: slider
    unit_of_measurement: "kW"

  ha1_batt_peak_shaving_soc:
    name: HA1 Battery Peak-Shaving Target SOC (%)
    icon: mdi:battery-heart
    min: 20
    max: 100
    step: 1
    mode: slider
    unit_of_measurement: "%"

  ha1_batt_grid_charge_cutoff_soc:
    name: HA1 Battery Grid Charge Cutoff SOC (%)
    icon: mdi:battery-clock
    min: 20
    max: 100
    step: 1
    mode: slider
    unit_of_measurement: "%"

  ha1_batt_min_soc_pct:
    name: HA1 Battery Minimum SOC (%)
    icon: mdi:battery-minus
    min: 5
    max: 60
    step: 1
    mode: slider
    unit_of_measurement: "%"

  ha1_batt_backup_soc_pct:
    name: HA1 Battery Backup Reserve SOC (%)
    icon: mdi:battery-plus
    min: 10
    max: 90
    step: 1
    mode: slider
    unit_of_measurement: "%"

############################################################
# Input selects – modes for EV/battery/peak planners
############################################################

input_select:
  ha1_ev_charging_mode:
    name: HA1 EV Charging Mode
    icon: mdi:ev-station
    options:
      - Off
      - Cheap-only
      - Aggressive
    initial: Cheap-only

  ha1_optimization_mode:
    name: HA1 Optimization Mode
    icon: mdi:tune-variant
    options:
      - Auto
      - Eco
      - Comfort
    initial: Auto

  ha1_peak_strategy_mode:
    name: HA1 Peak Strategy
    icon: mdi:transmission-tower
    options:
      - Strict
      - Balanced
      - Relaxed
    initial: Balanced
