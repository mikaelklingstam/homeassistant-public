title: Energy 1.2 Debug

views:
  - title: Energy 1.2 Debug
    panel: false
    cards:

      ########################################################
      # Card A – Grid & House raw vs HA1
      ########################################################
      - type: entities
        title: Grid & House – Raw vs HA1
        show_header_toggle: false
        entities:
          - entity: sensor.power_meter_active_power
            name: "Grid (raw: power_meter_active_power)"
          - entity: sensor.ha1_grid_power
            name: Grid (HA1 alias)
          - entity: sensor.ha1_flow_grid_import
            name: Grid import (HA1 flow)
          - entity: sensor.ha1_flow_grid_export
            name: Grid export (HA1 flow)
          - type: divider
          - entity: sensor.inverter_active_power
            name: House load (raw inverter active power, kW)
          - entity: sensor.ha1_house_power
            name: House load (HA1 alias, W)

      ########################################################
      # Card B – Solar & Battery raw vs HA1
      ########################################################
      - type: entities
        title: Solar & Battery – Raw vs HA1
        show_header_toggle: false
        entities:
          - entity: sensor.inverter_input_power
            name: Solar PV (raw, W)
          - entity: sensor.ha1_solar_power
            name: Solar PV (HA1 alias, W)
          - type: divider
          - entity: sensor.battery_state_of_capacity
            name: Battery SOC (raw)
          - entity: sensor.ha1_battery_soc
            name: Battery SOC (HA1)
          - entity: sensor.battery_charge_discharge_power
            name: Battery power (raw, kW)
          - entity: sensor.ha1_battery_power
            name: Battery power (HA1, W)

      ########################################################
      # Card C – HA1 flow sensors
      ########################################################
      - type: entities
        title: HA1 flow sensors
        show_header_toggle: false
        entities:
          - entity: sensor.ha1_flow_solar_to_house_ac
            name: "Solar → House (AC)"
          - entity: sensor.ha1_flow_solar_to_grid_ac
            name: "Solar → Grid (AC)"
          - entity: sensor.ha1_flow_battery_to_house_ac
            name: "Battery → House (AC)"
          - entity: sensor.ha1_flow_battery_to_grid_ac
            name: "Battery → Grid (AC)"
          - type: divider
          - entity: sensor.ha1_flow_solar_total
            name: Solar total (DC)
          - entity: sensor.ha1_flow_battery_discharge
            name: Battery discharge (DC)
          - entity: sensor.ha1_flow_battery_charge
            name: Battery charge (DC)

      ########################################################
      # Card D – History graph
      ########################################################
      - type: history-graph
        title: HA1 power curves
        hours_to_show: 4
        refresh_interval: 300
        entities:
          - sensor.ha1_solar_power
          - sensor.ha1_house_power
          - sensor.ha1_grid_power
          - sensor.ha1_battery_power

      ########################################################
      # Card E – [1.2] automations overview
      ########################################################
      - type: entities
        title: "[1.2] automations (ha1)"
        show_header_toggle: false
        entities:
          - type: section
            label: Battery 1.2
          - entity: automation.battery_start_grid_charge_in_cheap_hours_1_2
            name: "[1.2] Start grid charging in cheap hours"
          - entity: automation.battery_stop_grid_charge_when_done_or_not_cheap_1_2
            name: "[1.2] Stop grid charging when done / not cheap"
          - entity: automation.battery_discharge_for_peak_and_high_price_1_2
            name: "[1.2] Discharge for peak shaving / high price"
          - entity: automation.battery_stop_discharge_when_safe_1_2
            name: "[1.2] Stop forcible discharge when safe"
          - type: section
            label: Calendar / EV 1.2
          - entity: automation.ev_start_charging_during_cheapest_hours_1_2
            name: "[1.2] EV start charging (cheapest hours)"
          - entity: automation.battery_charge_during_cheapest_hours_1_2
            name: "[1.2] Battery cheapest-hours charge"
          - entity: automation.ev_stop_charging_after_cheapest_hours_1_2
            name: "[1.2] EV stop charging (cheapest hours)"
